
# Simple Authentication API 

Sign up and login authentication flow.


## Features

- OAuth 2.0
- JWT (JSON Web Token)
- Oracle Autonomous Database
- FastAPI

## Documentation

- ### Swagger: http://127.0.0.1:8000/docs
- ### Redocly: http://127.0.0.1:8000/redoc



![Logo](https://upload.wikimedia.org/wikipedia/commons/thumb/d/d2/Oauth_logo.svg/270px-Oauth_logo.svg.png)
![Logo](https://jwt.io/img/logo-asset.svg)
![Logo](https://upload.wikimedia.org/wikipedia/commons/thumb/5/50/Oracle_logo.svg/640px-Oracle_logo.svg.png)
![Logo](https://fastapi.tiangolo.com/img/logo-margin/logo-teal.png)


## Register Json example
```
{
  "username": "juanpfrancos",
  "password": "123456",
  "email": "johndoe@example.com",
  "first_name": "John",
  "last_name": "Doe",
  "phone_number": "+1234567890",
  "address": "123 Main St",
  "country": "USA",
  "state": "California",
  "city": "Los Angeles",
  "zip_code": "90001",
  "date_of_birth": "1990-05-15",
  "gender": "male",
  "profile_picture": "http://example.com/profile.jpg",
  "account_type": "regular",
  "language": "en"
}
```


## Database fields

| Campo | Tipo | Descripción |
| --- | --- | --- |
| `id` | `NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY` | Clave primaria autoincrementable para identificar de manera única a cada usuario. |
| `username` | `VARCHAR2(50) UNIQUE NOT NULL` | Nombre de usuario único para iniciar sesión. |
| `password` | `VARCHAR2(255) NOT NULL` | Campo para almacenar la contraseña del usuario, generalmente se almacena un hash seguro de la contraseña. |
| `email` | `VARCHAR2(100) UNIQUE NOT NULL` | Dirección de correo electrónico del usuario, debe ser única. |
| `first_name` | `VARCHAR2(50) NOT NULL` | Nombre del usuario. |
| `last_name` | `VARCHAR2(50) NOT NULL` | Apellido del usuario. |
| `phone_number` | `VARCHAR2(20) NOT NULL` | Número de teléfono del usuario. |
| `address` | `VARCHAR2(255) NOT NULL` | Dirección física del usuario. |
| `country` | `VARCHAR2(50) NOT NULL` | País de residencia del usuario. |
| `state` | `VARCHAR2(50) NOT NULL` | Estado o provincia de residencia del usuario. |
| `city` | `VARCHAR2(50) NOT NULL` | Ciudad de residencia del usuario. |
| `zip_code` | `VARCHAR2(10) NOT NULL` | Código postal de la dirección del usuario. |
| `date_of_birth` | `DATE NOT NULL` | Fecha de nacimiento del usuario. |
| `gender` | `VARCHAR2(6) CONSTRAINT chk_gender CHECK (gender IN ('male', 'female', 'other')) NOT NULL` | Género del usuario, con una restricción para aceptar solo valores válidos ('male', 'female', 'other'). |
| `profile_picture` | `VARCHAR2(255) DEFAULT NULL` | Ruta o URL de la imagen de perfil del usuario. |
| `account_type` | `VARCHAR2(8) CONSTRAINT chk_account_type CHECK (account_type IN ('admin', 'regular', 'guest')) NOT NULL` | Tipo de cuenta del usuario, con una restricción para aceptar solo valores válidos ('admin', 'regular', 'guest'). |
| `date_created` | `TIMESTAMP DEFAULT CURRENT_TIMESTAMP` | Fecha y hora de creación del usuario. |
| `date_modified` | `TIMESTAMP DEFAULT CURRENT_TIMESTAMP` | Fecha y hora de la última modificación del registro del usuario. |
| `last_login` | `TIMESTAMP` | Fecha y hora del último inicio de sesión del usuario. |
| `password_reset_token` | `VARCHAR2(255)` | Token para restablecer la contraseña del usuario. |
| `password_reset_expiry` | `TIMESTAMP` | Fecha y hora de expiración del token de restablecimiento de contraseña. |
| `email_verified` | `NUMBER(1) DEFAULT 0` | Bandera que indica si el correo electrónico del usuario está verificado (0 = no verificado, 1 = verificado). |
| `email_verification_token` | `VARCHAR2(255)` | Token para verificar el correo electrónico del usuario. |
| `email_verification_expiry` | `TIMESTAMP` | Fecha y hora de expiración del token de verificación de correo electrónico. |
| `two_factor_auth_enabled` | `NUMBER(1) DEFAULT 0` | Bandera que indica si la autenticación de dos factores está habilitada para el usuario (0 = deshabilitada, 1 = habilitada). |
| `two_factor_auth_secret` | `VARCHAR2(255)` | Clave secreta utilizada para la autenticación de dos factores. |
| `account_status` | `VARCHAR2(10) DEFAULT 'active' CONSTRAINT chk_account_status CHECK (account_status IN ('active', 'suspended', 'banned'))` | Estado de la cuenta del usuario, con una restricción para aceptar solo valores válidos ('active', 'suspended', 'banned'). |
| `preferences` | `CLOB` | Campo para almacenar las preferencias del usuario en formato estructurado. |
| `language` | `VARCHAR2(10) DEFAULT 'en'` | Idioma preferido del usuario para la aplicación. |

This users table covers a wide range of common fields and security features, such as two-factor authentication, email verification and password reset. It also includes fields for storing personal information, preferences and account status.

## Create table script

```
CREATE TABLE users (
    id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    username VARCHAR2(50) UNIQUE NOT NULL,
    password VARCHAR2(255) NOT NULL,
    email VARCHAR2(100) UNIQUE NOT NULL,
    first_name VARCHAR2(50) NOT NULL,
    last_name VARCHAR2(50) NOT NULL,
    phone_number VARCHAR2(20) NOT NULL,
    address VARCHAR2(255) NOT NULL,
    country VARCHAR2(50) NOT NULL,
    state VARCHAR2(50) NOT NULL,
    city VARCHAR2(50) NOT NULL,
    zip_code VARCHAR2(10) NOT NULL,
    date_of_birth DATE NOT NULL,
    gender VARCHAR2(6) CONSTRAINT chk_gender CHECK (gender IN ('male', 'female', 'other')) NOT NULL,
    profile_picture VARCHAR2(255) DEFAULT NULL,
    account_type VARCHAR2(8) CONSTRAINT chk_account_type CHECK (account_type IN ('admin', 'regular', 'guest')) NOT NULL,
    date_created TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    date_modified TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    last_login TIMESTAMP,
    password_reset_token VARCHAR2(255),
    password_reset_expiry TIMESTAMP,
    email_verified NUMBER(1) DEFAULT 0,
    email_verification_token VARCHAR2(255),
    email_verification_expiry TIMESTAMP,
    two_factor_auth_enabled NUMBER(1) DEFAULT 0,
    two_factor_auth_secret VARCHAR2(255),
    account_status VARCHAR2(10) DEFAULT 'active' CONSTRAINT chk_account_status CHECK (account_status IN ('active', 'suspended', 'banned')),
    preferences CLOB,
    language VARCHAR2(10) DEFAULT 'en'
);
```